<!-- 繁體中文內容 -->
<div data-lang="zh-TW" style="display: none;">
  <a href="#" onclick="switchLang('en')">English</a>
</div>
<!-- 英文內容 -->
<div data-lang="en">
  <a href="#" onclick="switchLang('zh-TW')">繁體中文</a>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        let currentPath = window.location.pathname;
        let langSwitchBtn = document.getElementById("lang-switch");
        let lang = "en";  // 預設語言

        // 檢查網址決定語言
        if (currentPath.includes("/zh-TW/")) {
            lang = "zh-TW";
        }

        // 顯示正確的語言內容
        document.querySelectorAll("[data-lang]").forEach(el => {
            el.style.display = (el.getAttribute("data-lang") === lang) ? "block" : "none";
        });

        // 語言切換按鈕
        langSwitchBtn.innerText = (lang === "en") ? "繁體中文" : "English";
        langSwitchBtn.href = (lang === "en") 
            ? currentPath.replace("/en/", "/zh-TW/") 
            : currentPath.replace("/zh-TW/", "/en/");
    });
    function switchLang(lang) {
    document.querySelectorAll('[data-lang]').forEach(el => {
        if (el.getAttribute('data-lang') === lang) {
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
    });
    localStorage.setItem('lang', lang); // 記住使用者選擇的語言
}

// 頁面載入時自動應用使用者的語言偏好
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'en';
    switchLang(savedLang);
});
</script>

{%- if include.theme == 'dark' -%}
  <header class="header header--dark" {%- if include.background -%} style="background: {{ include.background }};" {%- endif -%}>
{%- elsif include.theme == 'light' -%}
  <header class="header header--light" {%- if include.background -%} style="background: {{ include.background }};" {%- endif -%}>
{%- else -%}
  <header class="header" {%- if include.background -%} style="background: {{ include.background }};" {%- endif -%}>
{%- endif -%}
    <div class="main">
      <div class="header__title">
        <div class="header__brand">
          {%- include svg/logo.svg -%}
          {%- assign _paths_root = site.paths.root | default: site.data.variables.default.paths.root  -%}
          {%- include snippets/get-nav-url.html path=_paths_root -%}
          {%- if site.title -%}
            <a title="{%- if site.description -%}{{ site.description }}{%- endif -%}" href="{{ __return }}">{{ site.title }}</a>
          {%- endif -%}
        </div>
        {%- if site.search.provider -%}
          <button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button>
        {%- endif -%}
      </div>
      {%- if site.data.navigation.header -%}
      <nav class="navigation">
        <ul>
          {%- for _item in site.data.navigation.header -%}
            {%- include snippets/get-nav-url.html path=_item.url -%}
            {%- assign _nav_url = __return -%}
            {%- include snippets/get-nav-url.html path=page.url -%}
            {%- assign _page_url = __return -%}
            {%- include snippets/get-string-from-locale-config.html locale=_item.titles -%}
            {%- if _nav_url == _page_url or page.nav_key and _item.key and page.nav_key == _item.key -%}
              <li class="navigation__item navigation__item--active"><a href="{{ _nav_url }}">{%- if _item.title -%}{{ _item.title }}{%- else -%}{{ __return }}{%- endif -%}</a></li>
            {%- else -%}
              <li class="navigation__item"><a href="{{ _nav_url }}">{%- if _item.title -%}{{ _item.title }}{%- else -%}{{ __return }}{%- endif -%}</a></li>
            {%- endif -%}
          {%- endfor -%}
          {%- if site.search.provider -%}
            <li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li>
          {%- endif -%}
        </ul>
      </nav>
      {%- endif -%}
    </div>
  </header>
